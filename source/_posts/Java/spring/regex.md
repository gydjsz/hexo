---
title: 正则表达式
tags:
- 正则表达式
---

# 标准字符集合

|表达式|含义|
|:-:|:-:|
|\d|任意一个数字, 0~9中的任意一个|
|\D|除了\d|
|\w|任意一个字母或数字或下划线, 即A-Z, a~z, 0~9, \_中的一个|
|\W|除了\w|
|\s|包括空格、制表符、换行符等空白字符中的任意一个|
|\S|除了\s|
|.|匹配任意一个字符|

<!--more-->

# 自定义字符集合

[]: 匹配方括号中任意一个字符

|表达式|含义|
|:-:|:-:|
|\[ab5@]|匹配a、b、5、@|
|\[^abc]|匹配除了a、b、c之外的任意一个字符|
|\[f-k]|匹配f~k之间的任意一个字符|
|\[^A-F0-3]|匹配A~F、0~3之外的任意一个字符|

1. 正则表达式的特殊符号, 被包含到中括号中, 则失去特殊意义, 除了^、-
2. 标准字符集合, 除小数点外, 如果被包含于中括号, 自定义字符集合将包含该集合, 如:
[\d.\-+] 将匹配数字、小数点、+、-

# 量词

修饰匹配次数的特殊符号

|表达式|含义|
|:-:|:-:|
|{n}|表达式重复n次|
|{m, n}|表达式至少重复m次, 最多重复n次|
|{m,}|表达式至少重复m次|
|?|匹配表达式0次或者1次, 相当于{0, 1}|
|+|表达式至少出现1次, 相当于{1,}|
|\*|表达式不出现或出现任意次, 相当于{0,}|

\d{6}: 匹配连续6个数字

# 字符边界

匹配符合某种条件的位置

|表达式|含义|
|:-:|:-:|
|^|与字符串开始的地方匹配|
|$|与字符串结束的地方匹配|
|\b|匹配一个单词边界, 前面的字符和后面的字符不全是\w|

# 匹配模式

+ IGNORECASE: 忽略大小写模式
+ SINGLELINE: 单行模式
    - 整个文本看做一个字符串, 只有一个开头, 一个结尾
    - 小数点可以匹配包括换行符在内的任意字符
+ MULTILINE: 多行模式
  - 每行都是一个字符串, 都有开头和结尾
  - 在指定了MULTILINE之后, 如果需要仅匹配字符串开始和结束位置, 可以使用\A和\Z

# 选择符和分组

+ \| : 分支结构
  - 左右两边表达式为或关系, 匹配左边或者右边
+ (): 捕获组
  - 在被修饰匹配次数的时候, 括号中的表达式可以作为整体被修饰
  - 取匹配结果的时候, 括号中的表达式匹配到的内容可以被单独得到
  - 每一对括号会分配一个编号, 使用()的捕获根据左括号的顺序从1开始自动编号.捕获元素编号为零的第一个捕获是由整个正则表达式模式匹配的文本
+ (?:Expression): 一些表达式中, 不得不使用(), 但又不需要保存()中子表达式匹配的内容, 这时可以用非捕获组来抵消使用()带来的副作用

# 反向引用(\nnn)

+ 每一对()会分配一个编号, 使用()的捕获根据左括号的顺序从1开始自动编号
+ 通过反向引用, 可以对分组已捕获的字符串进行引用

正则: ([a-z]{2})\1

匹配: gogo toto goto goto dodo

结果: gogo toto dodo

此处有一个括号, 编号为1, 如果()中的正则匹配到go, 此时可以通过反向引用, 来通过编号匹配()中匹配的字符, \1表示引用第一个左括号内匹配到的元素, 即go, 所以最终得到gogo 

# 预搜索(零宽断言)

只进行子表达式的匹配, 判断当前位置的前后字符是否符合指定的条件, 匹配内容不计入最终的匹配结果, 是零宽度

|表达式|含义|
|:-:|:-:|
|(?=exp)|断言自身出现的位置的后面能匹配表达式exp|
|(?<=exp)|断言自身出现的位置的后面能匹配表达式exp|
|(?!exp)|断言自身出现的位置的后面不能匹配表达式exp|
|(?\<!exp)|断言自身出现的位置的前面不能匹配表达式exp|

匹配以ing结尾的字符串

正则: [a-z]+(?=ing)

匹配: eating going doing set

结果: eat go do

# mysql中使用正则

SELECT * FROM `user` WHERE name REGEXP '[a-z]'
